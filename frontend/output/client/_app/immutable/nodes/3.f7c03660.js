import{s as le,n as K,e as R,o as ae,h as se,f as B}from"../chunks/scheduler.292d8fbe.js";import{S as oe,i as ne,g as j,s as D,m as H,h as O,x as W,c as M,j as q,f,n as L,k as E,a as C,y as P,A as V,l as U,z as J,o as G}from"../chunks/index.e8f90f00.js";import{e as F}from"../chunks/each.e59479a4.js";import{p as ie}from"../chunks/stores.82667fcb.js";import{s as re}from"../chunks/store.cb9d5d67.js";function Q(l,a,o){const n=l.slice();return n[18]=a[o],n}function X(l,a,o){const n=l.slice();return n[21]=a[o],n}function Y(l,a,o){const n=l.slice();return n[4]=a[o],n}function Z(l,a,o){const n=l.slice();return n[21]=a[o],n}function $(l){let a,o,n,_,u,g=l[21].name+"",d,r,k,I;return{c(){a=j("label"),o=j("input"),_=D(),u=j("span"),d=H(g),r=D(),this.h()},l(h){a=O(h,"LABEL",{});var w=q(a);o=O(w,"INPUT",{type:!0,name:!0}),_=M(w),u=O(w,"SPAN",{class:!0,style:!0});var N=q(u);d=L(N,g),N.forEach(f),r=M(w),w.forEach(f),this.h()},h(){E(o,"type","checkbox"),E(o,"name","selectedTags"),o.value=n=l[21].id,E(u,"class",se(he)+" svelte-193k8i0"),U(u,"background-color",l[21].color)},m(h,w){C(h,a,w),P(a,o),P(a,_),P(a,u),P(u,d),P(a,r),k||(I=J(o,"change",l[11]),k=!0)},p(h,w){w&4&&n!==(n=h[21].id)&&(o.value=n),w&4&&g!==(g=h[21].name+"")&&G(d,g),w&4&&U(u,"background-color",h[21].color)},d(h){h&&f(a),k=!1,I()}}}function x(l){let a,o,n=l[4].name+"",_,u,g,d,r,k,I,h,w;function N(){return l[12](l[4])}return{c(){a=j("div"),o=j("p"),_=H(n),u=D(),g=j("button"),d=j("img"),I=D(),this.h()},l(S){a=O(S,"DIV",{});var v=q(a);o=O(v,"P",{class:!0});var m=q(o);_=L(m,n),m.forEach(f),u=M(v),g=O(v,"BUTTON",{});var y=q(g);d=O(y,"IMG",{src:!0,alt:!0,style:!0}),y.forEach(f),I=M(v),v.forEach(f),this.h()},h(){E(o,"class","text-center"),B(d.src,r=l[4].image)||E(d,"src",r),E(d,"alt",k=l[4].name),U(d,"width","70px"),U(d,"height","90px")},m(S,v){C(S,a,v),P(a,o),P(o,_),P(a,u),P(a,g),P(g,d),P(a,I),h||(w=J(g,"click",N),h=!0)},p(S,v){l=S,v&2&&n!==(n=l[4].name+"")&&G(_,n),v&2&&!B(d.src,r=l[4].image)&&E(d,"src",r),v&2&&k!==(k=l[4].name)&&E(d,"alt",k)},d(S){S&&f(a),h=!1,w()}}}function ee(l){let a,o=l[21].name+"",n;return{c(){a=j("span"),n=H(o),this.h()},l(_){a=O(_,"SPAN",{class:!0,style:!0});var u=q(a);n=L(u,o),u.forEach(f),this.h()},h(){E(a,"class","badge svelte-193k8i0"),U(a,"background-color",l[21].color)},m(_,u){C(_,a,u),P(a,n)},p(_,u){u&17&&o!==(o=_[21].name+"")&&G(n,o),u&17&&U(a,"background-color",_[21].color)},d(_){_&&f(a)}}}function te(l){let a,o=l[18].title+"",n,_,u,g,d,r,k,I,h,w=`add to favorites\r
        `,N,S,v=F(l[18].tags),m=[];for(let i=0;i<v.length;i+=1)m[i]=ee(X(l,v,i));function y(){return l[13](l[18])}return{c(){a=j("li"),n=H(o),_=D();for(let i=0;i<m.length;i+=1)m[i].c();u=D(),g=j("div"),d=D(),r=j("iframe"),I=D(),h=j("button"),h.textContent=w,this.h()},l(i){a=O(i,"LI",{class:!0});var c=q(a);n=L(c,o),c.forEach(f),_=M(i);for(let s=0;s<m.length;s+=1)m[s].l(i);u=M(i),g=O(i,"DIV",{class:!0}),q(g).forEach(f),d=M(i),r=O(i,"IFRAME",{title:!0,src:!0,frameborder:!0,scrolling:!0,height:!0,width:!0});var b=q(r);b.forEach(f),I=M(i),h=O(i,"BUTTON",{class:!0,"data-svelte-h":!0}),W(h)!=="svelte-1ngcf74"&&(h.textContent=w),this.h()},h(){E(a,"class","text-purple-800 text-center text-lg my-2 border-t-4 bg-green-100"),E(g,"class","my-2"),E(r,"title","mk1"),B(r.src,k=l[18].clip_source=="T"?`https://clips.twitch.tv/embed?clip=${l[18].clip}&parent=localhost`:`http://www.youtube.com/embed/${l[18].clip}`)||E(r,"src",k),E(r,"frameborder","0"),r.allowFullscreen="true",E(r,"scrolling","no"),E(r,"height",l[6]),E(r,"width",l[3]),E(h,"class","bg-orange-400 hover:bg-orange-600 text-white font-bold mt-2 mb-6 py-2 px-4 rounded-full")},m(i,c){C(i,a,c),P(a,n),C(i,_,c);for(let b=0;b<m.length;b+=1)m[b]&&m[b].m(i,c);C(i,u,c),C(i,g,c),C(i,d,c),C(i,r,c),C(i,I,c),C(i,h,c),N||(S=J(h,"click",y),N=!0)},p(i,c){if(l=i,c&17&&o!==(o=l[18].title+"")&&G(n,o),c&273){v=F(l[18].tags);let b;for(b=0;b<v.length;b+=1){const s=X(l,v,b);m[b]?m[b].p(s,c):(m[b]=ee(s),m[b].c(),m[b].m(u.parentNode,u))}for(;b<m.length;b+=1)m[b].d(1);m.length=v.length}c&17&&!B(r.src,k=l[18].clip_source=="T"?`https://clips.twitch.tv/embed?clip=${l[18].clip}&parent=localhost`:`http://www.youtube.com/embed/${l[18].clip}`)&&E(r,"src",k),c&8&&E(r,"width",l[3])},d(i){i&&(f(a),f(_),f(u),f(g),f(d),f(r),f(I),f(h)),V(m,i),N=!1,S()}}}function ce(l){let a,o="Optionally, you can select tags:",n,_,u,g,d="Choose your kameo:",r,k,I,h,w,N,S,v,m=F(l[2]),y=[];for(let e=0;e<m.length;e+=1)y[e]=$(Z(l,m,e));let i=F(l[1]),c=[];for(let e=0;e<i.length;e+=1)c[e]=x(Y(l,i,e));let b=F(l[8](l[0],l[4])),s=[];for(let e=0;e<b.length;e+=1)s[e]=te(Q(l,b,e));return{c(){a=j("h3"),a.textContent=o,n=D(),_=j("div");for(let e=0;e<y.length;e+=1)y[e].c();u=D(),g=j("h3"),g.textContent=d,r=D(),k=j("div");for(let e=0;e<c.length;e+=1)c[e].c();I=D(),h=j("h1"),w=H(l[5]),N=H(" combos:"),S=D(),v=j("ul");for(let e=0;e<s.length;e+=1)s[e].c();this.h()},l(e){a=O(e,"H3",{class:!0,"data-svelte-h":!0}),W(a)!=="svelte-jof8kw"&&(a.textContent=o),n=M(e),_=O(e,"DIV",{class:!0});var p=q(_);for(let A=0;A<y.length;A+=1)y[A].l(p);p.forEach(f),u=M(e),g=O(e,"H3",{class:!0,"data-svelte-h":!0}),W(g)!=="svelte-12ozpks"&&(g.textContent=d),r=M(e),k=O(e,"DIV",{class:!0});var t=q(k);for(let A=0;A<c.length;A+=1)c[A].l(t);t.forEach(f),I=M(e),h=O(e,"H1",{class:!0});var T=q(h);w=L(T,l[5]),N=L(T," combos:"),T.forEach(f),S=M(e),v=O(e,"UL",{});var z=q(v);for(let A=0;A<s.length;A+=1)s[A].l(z);z.forEach(f),this.h()},h(){E(a,"class","my-4 text-lg text-purple-800 font-bold"),E(_,"class","grid grid-rows-5 grid-flow-col gap-2"),E(g,"class","my-8 text-lg text-purple-800 font-bold"),E(k,"class","grid grid-rows-2 grid-flow-col gap-4"),E(h,"class","my-8 text-lg text-purple-800 font-bold")},m(e,p){C(e,a,p),C(e,n,p),C(e,_,p);for(let t=0;t<y.length;t+=1)y[t]&&y[t].m(_,null);C(e,u,p),C(e,g,p),C(e,r,p),C(e,k,p);for(let t=0;t<c.length;t+=1)c[t]&&c[t].m(k,null);C(e,I,p),C(e,h,p),P(h,w),P(h,N),C(e,S,p),C(e,v,p);for(let t=0;t<s.length;t+=1)s[t]&&s[t].m(v,null)},p(e,[p]){if(p&516){m=F(e[2]);let t;for(t=0;t<m.length;t+=1){const T=Z(e,m,t);y[t]?y[t].p(T,p):(y[t]=$(T),y[t].c(),y[t].m(_,null))}for(;t<y.length;t+=1)y[t].d(1);y.length=m.length}if(p&130){i=F(e[1]);let t;for(t=0;t<i.length;t+=1){const T=Y(e,i,t);c[t]?c[t].p(T,p):(c[t]=x(T),c[t].c(),c[t].m(k,null))}for(;t<c.length;t+=1)c[t].d(1);c.length=i.length}if(p&1369){b=F(e[8](e[0],e[4]));let t;for(t=0;t<b.length;t+=1){const T=Q(e,b,t);s[t]?s[t].p(T,p):(s[t]=te(T),s[t].c(),s[t].m(v,null))}for(;t<s.length;t+=1)s[t].d(1);s.length=b.length}},i:K,o:K,d(e){e&&(f(a),f(n),f(_),f(u),f(g),f(r),f(k),f(I),f(h),f(S),f(v)),V(y,e),V(c,e),V(s,e)}}}let he="badge";function ue(l,a,o){let n,_;R(l,re,s=>o(15,n=s)),R(l,ie,s=>o(16,_=s));let u=[],g=[],d=[],r=[],k="";const I=_.url.searchParams.get("character");let h=window.innerWidth,w=Math.round(h/2).toString();h<930&&(w=h.toString());let N=Math.round(w/1.64).toString();ae(async()=>{let s={method:"GET",headers:{"Content-Type":"application/json",authorization:`Token ${localStorage.getItem("auth_token")}`}};const e=await fetch(`http://127.0.0.1:8000/api/v1/combos/?character__name=${I}`,s);o(0,u=await e.json());const p=await fetch("http://127.0.0.1:8000/api/v1/kameos",s);o(1,g=await p.json());const t=await fetch("http://127.0.0.1:8000/api/v1/tags",s);o(2,d=await t.json())});const S=s=>{o(4,k=s)},v=(s,e="")=>{if(r.length===0&&!e)return s;let p=[],t=(T,z)=>z.every(A=>T.includes(A));for(let T=0;T<s.length;T++)(t(r.map(z=>z.id),s[T].tags.map(z=>z.id))||t(s[T].tags.map(z=>z.id),r.map(z=>z.id)))&&p.push(s[T]);return p.filter(T=>T.kameo_name==e)},m=s=>{let e=s.target.value,p=d.filter(t=>t.id==e)[0];r.includes(p)?r=r.filter(t=>t.id!=e):r.push(p),o(4,k="")},y=async s=>{console.log(n.account.id,s.id);let e=n.account,p=`http://localhost:8000/api/v1/combos/${s.id}/favorite/`,t={method:"POST",headers:{"Content-Type":"application/json",authorization:`Token ${localStorage.getItem("auth_token")}`},body:JSON.stringify({combo:s,user:e})};await fetch(p,t).catch(T=>console.log(T))};return[u,g,d,w,k,I,N,S,v,m,y,s=>m(s),s=>S(s.name),s=>y(s)]}class de extends oe{constructor(a){super(),ne(this,a,ue,ce,le,{})}}export{de as component};
