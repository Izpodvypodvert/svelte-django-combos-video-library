import{w as i}from"./index.33f33a55.js";const r=async o=>o.ok?await o.json():await o.json().then(a=>Promise.reject(a)),l=()=>{const{subscribe:o,set:a,update:c}=i({account:null,alert:null});return{subscribe:o,signup:async(t,e,s)=>{const n=await fetch("http://127.0.0.1:8000/api/v1/users/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:e,username:s})});return await r(n)},login:async(t,e)=>{const s=await fetch("http://localhost:8000/api/v1/token/login/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:e})}),n=await r(s);return n.auth_token?(localStorage.setItem("auth_token",n.auth_token),n):null},logout:async()=>{const t=localStorage.getItem("auth_token");fetch("http://localhost:8000/api/v1/token/logout/",{method:"POST",headers:{"Content-Type":"application/json",authorization:`Token ${t}`}}).catch(e=>console.log(e))},alert:async t=>c(e=>(e.alert=t,e)),getUser:async()=>{const t=await fetch("http://localhost:8000/api/v1/users/me/",{method:"GET",headers:{"Content-Type":"application/json",authorization:`Token ${localStorage.getItem("auth_token")}`}});return await r(t)},init:async(t=null)=>a({account:t,alert:null})}},p=l();export{p as s};
